<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/paper-input/paper-input.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">

<link rel="import" href="/elements/common/services/user-service.html">

<dom-module id="settings-page">
	<style include="iron-flex iron-flex-reverse">
		.list-item {
			@apply(--layout-horizontal);
		}

		.list-item > .item-label{
			width:200px;
			font-weight: bold;
		}

		.aligned-item {
			margin-left: 200px;
		}
		#fieldList {
			@apply(--layout-vertical);
		}
		#buttons {
			@apply(--layout-horizontal-reverse);
		}

		paper-input {
			width: 250px;
		}

		#wrapper {
			margin-left: 20%;
			margin-right: 20%;
			width: 60%;
		}
	</style>
	<template>
		<user-service id="userService" user="{{user}}"></user-service>
		<paper-material id="wrapper" elevation="1" class="card">
			<div class="mainContent">
				<div id="fieldList">
					<div>
						<div class="list-item">
							<div class="item-label">Name</div>
							<div>{{fullName}}</div>
						</div>
						<div class="aligned-item">
							<paper-input label="First name" value="{{user.firstName}}"></paper-input>
							<paper-input label="Last name" value="{{user.lastName}}"></paper-input>
						</div>
					</div>
					<div>
						<div class="list-item">
							<div class="item-label">Username</div>
							<paper-input value="{{user.username}}" no-label-float></paper-input>
						</div>
						<div class="aligned-item">
							<p>Your public username is the same as your profile address</p>
							<p>https://app.cod.uno/profile/<span>{{user.username}}</span></p>
						</div>
					</div>
					<div>
						<div class="list-item">
							<div class="item-label">Email</div>
							<paper-input value="{{user.email}}" no-label-float></paper-input>
						</div>
					</div>
					<div>
						<div class="list-item">
							<div class="item-label">Password</div>
							<paper-button class="primary">Change password</paper-button>
						</div>
					</div>
					<!-- <editable-field labe	l="Password" value="Never updated">
						<paper-input label="Current" value="{{password.old}}"></paper-input>
						<paper-input label="New" value="{{password.new}}"></paper-input>
						<paper-input label="Re-type new" value="{{password.newRetyped}}"></paper-input>
					</editable-field> -->
				</div>
				<div class="aligned-item">
					<paper-button raised on-click="_saveUser" class="success">Save</paper-button>
				</div>
			</div>
		</paper-material>
	</template>
</dom-module>

<script>
	Polymer({
		is: 'settings-page',
		properties: {
			user: {
				type: Object
			},
			fullName: {
				type: String,
				computed: '_getFullName(user.firstName, user.lastName)'
			},
			password: {
				type: Object,
				value: {}
			}
		},
		ready: function(){
			this.$$('user-service').whoAmI();
		},
		_saveUser: function(){
			this.$.userService.updateMe(this.user);
		},
		_getFullName: function(firstName, lastName){
			var name = '';
			if(firstName){
				name = firstName + ' ';
			}
			if(lastName){
				name = name + lastName;
			}
			return name;
		}
});
</script>
