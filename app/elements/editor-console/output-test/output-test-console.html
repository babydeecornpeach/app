<dom-module id="output-test-console">

  <style>
    #consoleContainer{
      height: 20%;
    }

    #consoleOutput{
      border: none;
      position: relative;
      width: 100%;
      height: 80%;
      max-height: 80%;
      left: 0;
      right: 0;
    }

    .red{
      color: red;
    }

    .green{
      color: green;
    }

    p{
      font-family: "Lucida Console", Monaco, monospace;
    }
  </style>

  <template>
    <div id="consoleContainer">
      <iron-pages id="consoleOutput" selected="{{selectedConsole}}">
        <div>
          <p>Console output</p>
        </div>
        <div>
          <p>Loading ...</p>
        </div>
        <div>
          <template is="dom-repeat" items="{{items}}">
            <p class$="{{getClass(index)}}">{{item}}</p>
          </template>
        </div>
        <div>
          <p>Error</p>
        </div>
      </iron-pages>
    </div>

  </template>
  <script src="../../../scripts/util.js" type="application/javascript"></script>
  <script>
   Polymer({
     is: 'output-test-console',
     properties:{
       selectedConsole:{
         type: String
       },
       items:{
         type: Array,
         notify: true
       }
     },

     ready: function(){
       this.bg = "green";
       this.selectedConsole = "0";
     },
     setOutput: function(data){
       var output = ""
       if(data!=undefined){
         if(data.Stderr != ""){
           output = data.Stderr !="" && data.Stderr!=undefined ? data.Stderr : data.Stdout
         }else{
           this.diffLines = data.DiffLines
           this.items = data.Stdout.split("\n");
         }
       }else{
         output = "Bad request"
       }
     },
     getClass: function(index){
       console.log(index)
       for(var i=0;i<this.diffLines.length;i++){
         if(index==this.diffLines[i]){
           return "red";
         }
       }
       return "green";
     },
     setConsole: function(console){
       // TODO(victorbalan): Make console receive a text.
       this.selectedConsole = console;
     }
   });
 </script>
</dom-module>
