<link rel="import" href="../editor-console/simple/simple-console.html">
<link rel="import" href="../editor-console/javaut/javaut-console.html">
<link rel="import" href="../editor-console/output-test/output-test-console.html">

<dom-module id="code-editor">
  <style>
    .left{
      height: 100%;
      width: 50%;
    }
    #editor{
      height: 100%;
    }

    /*.left{
      width: 50%;
    }*/
    .halfPage{
      height: 100%;
      width: 50%;
    }

    .fullHeight{
      height: 100%;
    }

  </style>

  <template>
    <div class="horizontal layout fullHeight">
      <div class="flex fullHeight">
        <paper-material elevation="1" style="height: 92%;">
          <div id="editor"></div>
        </paper-material>
      </div>
      <div class="flex vertical layout">
        <div class="flex horizontal layout">
          <paper-material elevation="1" class="flex self-stretch">
            <h1 class="paper-font-body5">{{challenge.name}}</h1>
            <p>{{challenge.instructions}}</p>
          </paper-material>
        </div>
        <div class="flex horizontal layout">
          <paper-material elevation="1"  class="flex self-stretch">
            <div id="console">Console</div>
          </paper-material>
        </div>
      </div>
    </div>
  </template>

  <script src="../../bower_components/ace-min-noconflict/ace.js" type="application/javascript"></script>
  <script src="../../bower_components/ace-min-noconflict/ext-language_tools.js" type="application/javascript"></script>
  <script>
    Polymer({
      is: 'code-editor',
      properties: {
        editor: Object,
        challenge: {
          type: Object,
          notify: true,
          reflectToAttribute: true
        }
      },
      ready: function(){
        //initialize the code editor
        ace.require("ace/ext/language_tools");
        this.editor = ace.edit(this.$.editor);
        this.editor.setTheme('ace/theme/chrome');
        this.editor.setOptions({
          enableBasicAutocompletion: true
        });
      },
      attributeChanged: function(name, old){
        switch(name){
          case "challenge":
            var webInterface = document.createElement(this.challenge.webInterface);
            webInterface.editor = this.editor;
            webInterface.challenge = this.challenge;
            this.$.console.innerHTML = "";
            this.$.console.appendChild(webInterface);
            break;
        }
      }
    });

  </script>
</dom-module>
